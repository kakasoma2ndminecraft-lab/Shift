<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shift</title>
  <style>
    body { margin:0; padding:0; font-family:'Noto Sans JP',sans-serif; background: radial-gradient(circle at 30% 20%, #2e3f53, #1b2735 60%, #131b24); color:#fff; overflow:hidden; }
    .bg-glow { position: fixed; width:100%; height:100%; pointer-events:none; background: radial-gradient(circle at 70% 80%, rgba(88,127,155,0.35), transparent 60%); filter: blur(60px); }
    .center { width:100%; height:100vh; display:flex; justify-content:center; align-items:center; }
    .card { background: rgba(255,255,255,0.06); backdrop-filter: blur(12px); border-radius:18px; padding:32px; width:360px; text-align:center; box-shadow:0 8px 30px rgba(0,0,0,0.25); animation: fadeIn 0.7s ease; }
    @keyframes fadeIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
    input, select { width:86%; padding:12px; margin:8px 0; border-radius:10px; border:none; outline:none; font-size:15px; }
    button { width:90%; padding:12px; margin-top:12px; background:#4f7ea3; border:none; border-radius:10px; font-size:16px; color:white; cursor:pointer; transition:0.25s; }
    button:hover { background:#6fa2c4; transform:translateY(-2px); }
    .hidden { display:none; }
    .home { padding:20px; max-width:860px; margin:24px auto; overflow-y:auto; max-height:80vh; }
    .row { display:flex; gap:12px; align-items:center; }
    .store-item, .task-item, .request-item, .book-item { background: rgba(255,255,255,0.06); padding:14px; border-radius:14px; margin-bottom:10px; display:flex; justify-content:space-between; align-items:center; }
    #purchaseAnimation { position: fixed; top:50%; left:50%; transform:translate(-50%, -50%); background: linear-gradient(180deg, rgba(255,255,255,0.28), rgba(255,255,255,0.12)); padding:24px 40px; border-radius:20px; font-size:22px; display:none; animation: pop 1.2s ease; backdrop-filter: blur(14px); box-shadow: 0 0 40px rgba(255,255,255,0.28), 0 0 90px rgba(80,140,255,0.18); cursor:pointer; text-align:center; color:#072038; font-weight:700; }
    @keyframes pop { 0% { transform:translate(-50%, -50%) scale(0.4); opacity:0; filter:brightness(0.6); } 40% { transform:translate(-50%, -50%) scale(1.3); opacity:1; filter:brightness(1.6); } 70% { transform:translate(-50%, -50%) scale(1.08); filter:brightness(1.2); } 100% { transform:translate(-50%, -50%) scale(1); opacity:1; filter:brightness(1); } }
    .modal { position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:rgba(0,0,0,0.6); padding:18px; border-radius:12px; display:none; z-index:2000; }
    .small { width:160px; }
    .tabBar { position:fixed; bottom:0; left:0; width:100%; display:flex; justify-content:space-around; background: rgba(20,30,40,0.85); padding:8px 0; }
    .tabBar button { width:48%; }
  </style>
</head>
<body>
  <div class="bg-glow"></div>

  <div class="center" id="loginSelect">
    <div class="card">
      <h2>Shift</h2>
      <button onclick="showAdminLogin()">ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³</button>
      <button onclick="showUserLogin()">ãƒãƒ¼ãƒãƒ«ãƒ­ã‚°ã‚¤ãƒ³</button>
    </div>
  </div>

  <div class="center hidden" id="adminLogin">
    <div class="card">
      <h3>ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³</h3>
      <input id="adminID" placeholder="ç®¡ç†ID" />
      <input id="adminPass" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" type="password" />
      <button onclick="adminLoginCheck()">ãƒ­ã‚°ã‚¤ãƒ³</button>
      <button onclick="backToSelect()">æˆ»ã‚‹</button>
    </div>
  </div>

  <div class="center hidden" id="userLogin">
    <div class="card">
      <h3>ãƒ­ã‚°ã‚¤ãƒ³</h3>
      <input id="uid" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼ID" />
      <input id="upass" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" type="password" />
      <button onclick="userLoginCheck()">ãƒ­ã‚°ã‚¤ãƒ³</button>
      <button onclick="backToSelect()">æˆ»ã‚‹</button>
    </div>
  </div>

  <div class="center hidden" id="adminPanel">
    <div class="card">
      <h2>ç®¡ç†è€…ãƒ‘ãƒãƒ«</h2>
      <input id="newUser" placeholder="æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ID" />
      <input id="newPass" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" />
      <button onclick="addUser()">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¿½åŠ </button>
      <button onclick="deleteUser()">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤</button>
      <button onclick="goHome()">ãƒ›ãƒ¼ãƒ ã¸</button>
      <h3>ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§</h3>
      <div id="userList"></div>
    </div>
  </div>

  <div class="home hidden" id="home">
    <h2>ãƒ›ãƒ¼ãƒ </h2>
    <p>ã“ã“ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ›ãƒ¼ãƒ ç”»é¢ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
  </div>

  <script>
    function showAdminLogin() {
      document.getElementById('loginSelect').classList.add('hidden');
      document.getElementById('adminLogin').classList.remove('hidden');
    }

    function showUserLogin() {
      document.getElementById('loginSelect').classList.add('hidden');
      document.getElementById('userLogin').classList.remove('hidden');
    }

    function backToSelect() {
      document.getElementById('adminLogin').classList.add('hidden');
      document.getElementById('userLogin').classList.add('hidden');
      document.getElementById('loginSelect').classList.remove('hidden');
    }

    function goHome() {
      document.getElementById('adminPanel').classList.add('hidden');
      document.getElementById('loginSelect').classList.add('hidden');
      document.getElementById('home').classList.remove('hidden');
    }
  </script>
</body>
<script>
  // ã‚µãƒ³ãƒ—ãƒ«ç®¡ç†è€…
  const adminCredentials = { id: "admin", pass: "1234" };

  // ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åˆæœŸãƒ‡ãƒ¼ã‚¿
  const users = [{ id: "user1", pass: "1111", balance: 50 }];
  const usersBalances = {};
  users.forEach(u => usersBalances[u.id] = u.balance);

  let currentUser = null; // ç¾åœ¨ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID

  // ç”»é¢åˆ‡ã‚Šæ›¿ãˆé–¢æ•°
  function showAdminLogin() {
    document.getElementById('loginSelect').classList.add('hidden');
    document.getElementById('adminLogin').classList.remove('hidden');
  }
  function showUserLogin() {
    document.getElementById('loginSelect').classList.add('hidden');
    document.getElementById('userLogin').classList.remove('hidden');
  }
  function backToSelect() {
    document.getElementById('adminLogin').classList.add('hidden');
    document.getElementById('userLogin').classList.add('hidden');
    document.getElementById('loginSelect').classList.remove('hidden');
  }

  // ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³ãƒã‚§ãƒƒã‚¯
  function adminLoginCheck() {
    const id = document.getElementById('adminID').value;
    const pass = document.getElementById('adminPass').value;
    if(id===adminCredentials.id && pass===adminCredentials.pass){
      currentUser = id;
      document.getElementById('adminLogin').classList.add('hidden');
      document.getElementById('adminPanel').classList.remove('hidden');
      document.getElementById('tabBar').classList.remove('hidden');
      renderUsers();
    } else {
      alert('IDã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™');
    }
  }

  // ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³ãƒã‚§ãƒƒã‚¯
  function userLoginCheck() {
    const id = document.getElementById('uid').value;
    const pass = document.getElementById('upass').value;
    const user = users.find(u => u.id===id && u.pass===pass);
    if(user){
      currentUser = id;
      document.getElementById('userLogin').classList.add('hidden');
      document.getElementById('home').classList.remove('hidden');
      document.getElementById('tabBar').classList.remove('hidden');
      document.getElementById('balance').textContent = usersBalances[currentUser];
      populateTaskUsers(); // å€‹äººç™ºæ³¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆæ›´æ–°
    } else {
      alert('IDã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™');
    }
  }

  // ç®¡ç†è€…ãƒ‘ãƒãƒ«ç”¨: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ ãƒ»å‰Šé™¤
  function addUser(){
    const id = document.getElementById('newUser').value.trim();
    const pass = document.getElementById('newPass').value.trim();
    if(!id || !pass){ alert('IDã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ä¸¡æ–¹å¿…è¦'); return; }
    if(users.find(u=>u.id===id)){ alert('æ—¢ã«å­˜åœ¨'); return; }
    users.push({id, pass, balance:0});
    usersBalances[id]=0;
    renderUsers();
    populateTaskUsers();
    document.getElementById('newUser').value='';
    document.getElementById('newPass').value='';
  }

  function deleteUser(){
    const id = document.getElementById('newUser').value.trim();
    const index = users.findIndex(u=>u.id===id);
    if(index>=0){
      users.splice(index,1);
      delete usersBalances[id];
      renderUsers();
      populateTaskUsers();
      document.getElementById('newUser').value='';
    } else {
      alert('å­˜åœ¨ã—ã¾ã›ã‚“');
    }
  }

  function renderUsers(){
    const list = document.getElementById('userList');
    list.innerHTML='';
    users.forEach(u=>{
      list.innerHTML+=`<div>${u.id} - ${usersBalances[u.id]} Shift</div>`;
    });
  }

  function goHome(){
    document.getElementById('adminPanel').classList.add('hidden');
    document.getElementById('home').classList.remove('hidden');
  }

  // å€‹äººç™ºæ³¨ã‚¿ã‚¹ã‚¯ç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆ
  function populateTaskUsers(){
    const select = document.getElementById('taskUser');
    select.innerHTML='';
    users.forEach(u=>{
      if(u.id!==currentUser){
        const opt = document.createElement('option');
        opt.value = u.id;
        opt.textContent = u.id;
        select.appendChild(opt);
      }
    });
  }

  function toggleUserSelect(){
    const type = document.getElementById('taskType').value;
    const sel = document.getElementById('taskUser');
    if(type==='private'){ sel.classList.remove('hidden'); }
    else { sel.classList.add('hidden'); }
  }

</script>

</html>
<div id="home" class="home hidden">
    <h2>Shift ãƒ›ãƒ¼ãƒ </h2>
    <p>æ®‹é«˜: <span id="balance">0</span> Shift</p>

    <h3>ã‚¹ãƒˆã‚¢</h3>
    <div class="store-item"><span>âœï¸ ãˆã‚“ã´ã¤</span><button onclick="buyItem(5)">5</button></div>
    <div class="store-item"><span>ğŸ“˜ ãƒãƒ¼ãƒˆ</span><button onclick="buyItem(8)">8</button></div>
    <div class="store-item"><span>ğŸª ã‚¯ãƒƒã‚­ãƒ¼</span><button onclick="buyItem(3)">3</button></div>

    <h3>ä¾é ¼</h3>
    <input id="taskTitle" placeholder="ä¾é ¼ã‚¿ã‚¤ãƒˆãƒ«" />
    <select id="taskType" onchange="toggleUserSelect()">
      <option value="public">å…¨å“¡å…¬é–‹</option>
      <option value="private">å€‹äººç™ºæ³¨</option>
    </select>
    <select id="taskUser" class="hidden"></select>
    <input id="taskAmount" placeholder="å ±é…¬ (Shift)" type="number" />
    <button onclick="createTask()">ä¾é ¼ä½œæˆ</button>

    <div id="taskList"></div>

    <h3>æœ¬æ£š</h3>
    <input id="bookTitle" placeholder="æœ¬ã®ã‚¿ã‚¤ãƒˆãƒ«" />
    <input id="bookPrice" placeholder="ä¾¡æ ¼ (Shift) or ç„¡æ–™" type="text" />
    <textarea id="bookDesc" placeholder="èª¬æ˜"></textarea>
    <button onclick="addBook()">æœ¬ã‚’æŠ•ç¨¿</button>
    <div id="bookList"></div>
</div>

<div id="purchaseAnimation">è³¼å…¥å®Œäº†ï¼</div>

<div class="tabBar hidden" id="tabBar">
    <button onclick="showHomeTab()">HOME</button>
    <button onclick="showBookTab()">Book</button>
</div>

<script>
    const books = [];

    function showHomeTab(){ document.getElementById('home').classList.remove('hidden'); }
    function showBookTab(){ document.getElementById('home').classList.remove('hidden'); renderBooks(); }

    function addBook(){
        const title = document.getElementById('bookTitle').value.trim();
        const priceText = document.getElementById('bookPrice').value.trim();
        const desc = document.getElementById('bookDesc').value.trim();
        if(!title){ alert('ã‚¿ã‚¤ãƒˆãƒ«å¿…è¦'); return; }
        const price = priceText.toLowerCase() === 'ç„¡æ–™' ? 0 : parseInt(priceText);
        const book = { title, price, desc, owner:currentUser };
        books.push(book);
        document.getElementById('bookTitle').value='';
        document.getElementById('bookPrice').value='';
        document.getElementById('bookDesc').value='';
        renderBooks();
    }

    function renderBooks(){
        const list = document.getElementById('bookList');
        list.innerHTML='';
        books.forEach((b,i)=>{
            const div = document.createElement('div');
            div.className='book-item';
            const priceText = b.price===0 ? 'ç„¡æ–™' : b.price+' Shift';
            div.innerHTML=`<span>${b.title} - ${priceText} - æŠ•ç¨¿è€…:${b.owner}<br>${b.desc}</span>`;
            if(b.owner!==currentUser){
                const btn = document.createElement('button');
                btn.textContent='è³¼å…¥';
                btn.onclick=()=>{ buyBook(i); };
                div.appendChild(btn);
            }
            list.appendChild(div);
        });
    }

    function buyBook(index){
        const book = books[index];
        if(usersBalances[currentUser]<book.price){ alert('æ®‹é«˜ä¸è¶³'); return; }
        usersBalances[currentUser]-=book.price;
        usersBalances[book.owner]+=book.price;
        document.getElementById('balance').textContent = usersBalances[currentUser];
        const anim = document.getElementById('purchaseAnimation');
        anim.textContent = `è³¼å…¥å®Œäº†: ${book.title} - ${book.price} Shift`;
        anim.style.display='block';
        function hide(){ anim.style.display='none'; anim.removeEventListener('click', hide); }
        anim.addEventListener('click', hide);
    }
</script>
